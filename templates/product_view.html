{% extends "base.html" %}
{% block title %}{{ product.title }}{% endblock %}
{% block content %}
<div class="row">
  <div class="col-md-6">
    {% if product.image_filename %}
      <img src="{{ url_for('static', filename='uploads/' ~ product.image_filename) }}" class="img-fluid">

    {% endif %}
  </div>
  <div class="col-md-6">
    <h2>{{ product.title }}</h2>
    <p class="fw-bold">${{ '%.2f'|format(product.price_cents/100) }}</p>
    <p>{{ product.description }}</p>
    <p><strong>Talla:</strong> {{ product.size or 'N/A' }}</p>

    <form method="post" action="{{ url_for('cart_add', product_id=product.id) }}">
      <button class="btn btn-success">Agregar al carrito</button>
    </form>

    {% if current_user.is_authenticated and (current_user.id == product.user_id or current_user.is_admin) %}
      <a href="{{ url_for('edit_product', product_id=product.id) }}" class="btn btn-secondary mt-2">Editar producto</a>
      <form method="post" action="{{ url_for('delete_product', product_id=product.id) }}" style="display:inline;">
        <button class="btn btn-danger mt-2" onclick="return confirm('Eliminar?')">Eliminar</button>
      </form>
    {% endif %}

    <p>Vendedor: {{ product.owner.username }}</p>
  </div>
</div>
{% endblock %}
